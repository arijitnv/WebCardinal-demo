import{e as t,h as i,g as e,f as s}from"./p-f124fbbf.js";import{c as n,d as o}from"./p-61cc1f50.js";function a(t){let i;if("function"==typeof t.detail?i=t.detail:t.detail&&"function"==typeof t.detail.callback&&(i=t.detail.callback),i)return i;console.warn("Invalid callback for event",t)}class r{constructor(t,{model:i,translationModel:e,tags:s,routing:r}){this.listeners={getModel:()=>null,getTranslationModel:()=>null,getTags:()=>null,getRouting:()=>null},this.host=t,this.listeners.getModel=t=>{t.stopImmediatePropagation();const e=a(t);if(e){if(t.detail.chain){let s=t.detail.chain;return s.startsWith(n)?(s=s.slice(1),void e(void 0,i.getChainValue(s))):(console.warn([`Invalid chain found for ${t} (chain: "${s}")!`,`A valid chain must start with "${n}".`].join("\n")),void e(void 0,i))}e(void 0,i)}},this.listeners.getTranslationModel=t=>{t.stopImmediatePropagation();const i=a(t);if(i){if(t.detail.chain){let s=t.detail.chain;return s.startsWith(o)?(s=s.slice(1),void i(void 0,e.getChainValue(s))):(console.warn([`Invalid chain found for ${t} (chain: "${s}")!`,`A valid chain must start with "${o}".`].join("\n")),void i(void 0,e))}i(void 0,e)}},s&&(this.tags=s,this.listeners.getTags=t=>{t.stopImmediatePropagation();const i=a(t);if(i)return t.detail.tag?this.tags[t.detail.tag]?i(void 0,this.tags[t.detail.tag]):i(`There is no page tag "${t.detail.tag}" registered in webcardinal.json`):i(void 0,this.tags)}),r&&(this.routing=r,this.listeners.getRouting=t=>{t.stopImmediatePropagation();const i=a(t);i&&i(void 0,this.routing)})}get getModel(){const i=t;return{add:()=>this.host.addEventListener(i,this.listeners.getModel),remove:()=>this.host.removeEventListener(i,this.listeners.getModel),eventName:i}}get getTranslationModel(){const t=i;return{add:()=>this.host.addEventListener(t,this.listeners.getTranslationModel),remove:()=>this.host.removeEventListener(t,this.listeners.getTranslationModel),eventName:t}}get getTags(){if(!this.tags)return;const t=e;return{add:()=>this.host.addEventListener(t,this.listeners.getTags),remove:()=>this.host.removeEventListener(t,this.listeners.getTags),eventName:t}}get getRouting(){if(!this.routing)return;const t=s;return{add:()=>this.host.addEventListener(t,this.listeners.getRouting),remove:()=>this.host.removeEventListener(t,this.listeners.getRouting),eventName:t}}}export{r as C}